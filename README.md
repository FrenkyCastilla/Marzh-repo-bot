# üõ°Ô∏è VPN Shop Bot (Aiogram 3 + Marzban)

![Python](https://img.shields.io/badge/Python-3.11-blue?logo=python&logoColor=white)
![Aiogram](https://img.shields.io/badge/Aiogram-3.x-blue?logo=telegram)
![Marzban](https://img.shields.io/badge/Marzban-Integration-black)
![License](https://img.shields.io/badge/License-MIT-green)

–¢–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–¥–∞–∂–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è VPN-–¥–æ—Å—Ç—É–ø–∞–º–∏. –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–∞–Ω–µ–ª—å—é **Marzban**.
–ë–æ—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç –∫–æ–Ω—Ü–µ–ø—Ü–∏—é **"–î–æ–≤–µ—Ä–µ–Ω–Ω–æ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞"**: –º–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –≤—ã–¥–∞—á–∞ —Ç–æ–≤–∞—Ä–∞ –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —á–µ–∫–∞, —Å –ø–æ—Å–ª–µ–¥—É—é—â–µ–π –º–æ–¥–µ—Ä–∞—Ü–∏–µ–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º.

## ‚ú® –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### ‚ö° –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –≤—ã–¥–∞—á–∞ (Trusted Flow)
* **–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–µ—Å—Ç:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –¥–æ—Å—Ç—É–ø –≤ –æ–¥–∏–Ω –∫–ª–∏–∫. –ë–æ—Ç —Å–∞–º —Å–æ–∑–¥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Marzban.
* **–ü–æ–∫—É–ø–∫–∞:** –ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞ –æ–ø–ª–∞—Ç—ã –±–æ—Ç **–º–≥–Ω–æ–≤–µ–Ω–Ω–æ** –ø—Ä–æ–¥–ª–µ–≤–∞–µ—Ç –ø–æ–¥–ø–∏—Å–∫—É –∏ –≤—ã–¥–∞–µ—Ç –∫–ª—é—á–∏. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —á–µ–∫ –ø–æ—Å—Ç—Ñ–∞–∫—Ç—É–º.

### üîê –£–º–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
* –ù–∏–∫–∞–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö.
* –õ–æ–≥–∏–Ω–æ–º –≤ Marzban —Å–ª—É–∂–∏—Ç **Telegram Username** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
* –ï—Å–ª–∏ Username –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **Telegram ID** (`user_123456`).
* 100% –∑–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–µ–π.

### üë§ –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç
* –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–ø–∏—Å–∫–∏ –∏ –¥–∞—Ç—ã –æ–∫–æ–Ω—á–∞–Ω–∏—è.
* –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–ª—é—á–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ:
    * üîó **Subscription Link** (–¥–ª—è –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è).
    * üîë **VLESS** (—Å—ã—Ä–æ–π –∫–ª—é—á –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –≤—Å—Ç–∞–≤–∫–∏).

### üõ† –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –ø–ª–∞—Ç–µ–∂–∞—Ö –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ –ª–∏—á–∫—É –∞–¥–º–∏–Ω—É.
* –ò–Ω–ª–∞–π–Ω-–∫–Ω–æ–ø–∫–∏ –ø—Ä—è–º–æ –ø–æ–¥ —Ñ–æ—Ç–æ —á–µ–∫–∞:
    * ‚úÖ **–û–¥–æ–±—Ä–∏—Ç—å:** –§–∏–∫—Å–∏—Ä—É–µ—Ç —É—Å–ø–µ—Ö –≤ –±–∞–∑–µ.
    * ‚ùå **–û—Ç–∫–ª–æ–Ω–∏—Ç—å:** –ü–æ–º–µ—á–∞–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –∫–∞–∫ failed (–¥–æ—Å—Ç—É–ø –º–æ–∂–Ω–æ –æ—Ç–æ–∑–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é –≤ –ø–∞–Ω–µ–ª–∏).

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

–ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–ø–∞–∫–æ–≤–∞–Ω –≤ Docker Compose.

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
git clone [https://github.com/YOUR_USERNAME/REPO_NAME.git](https://github.com/YOUR_USERNAME/REPO_NAME.git)
cd vpn-shop-bot
2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–∏–º–µ—Ä–∞:

Bash

cp example.env .env
nano .env
–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

BOT_TOKEN: –¢–æ–∫–µ–Ω –æ—Ç @BotFather.

ADMIN_ID: –í–∞—à Telegram ID.

MARZBAN_URL: –ê–¥—Ä–µ—Å –ø–∞–Ω–µ–ª–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, https://vpn.example.com:8000).

MARZBAN_USERNAME / PASSWORD: –î–∞–Ω–Ω—ã–µ –∞–¥–º–∏–Ω–∞ –ø–∞–Ω–µ–ª–∏ (sudo).

3. –ó–∞–ø—É—Å–∫
Bash

docker-compose up -d --build
üóÑ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
app/bot: –õ–æ–≥–∏–∫–∞ –±–æ—Ç–∞ (—Ö–µ–Ω–¥–ª–µ—Ä—ã, –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã).

app/core: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –º–æ–¥–µ–ª–∏ (SQLAlchemy).

app/services: API Marzban –∏ —Å–µ—Ä–≤–∏—Å –ø–ª–∞—Ç–µ–∂–µ–π.

data/: –ü–∞–ø–∫–∞ –¥–ª—è –ë–î (SQLite).

ü§ù –ö–æ–Ω—Ç–∞–∫—Ç—ã
–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ –¥–ª—è —á–∞—Å—Ç–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.
