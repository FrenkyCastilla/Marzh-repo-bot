# Telegram VPN Shop Bot (Интеграция с Marzban)

Готовый к использованию Telegram-бот для продажи VPN-доступа с использованием бэкенда Marzban.

## Возможности
- **Автоматическое создание пользователей**: "Оптимистичный интерфейс" предоставляет доступ на 24 часа сразу после отправки чека.
- **Одобрение администратором**: Ручная проверка платежей через Telegram с кнопками одобрения или отклонения.
- **Веб-админка**: Управление пользователями, тарифами и серверами через веб-интерфейс (SQLAdmin).
- **Управление подписками**: Фоновые задачи автоматически отключают истекшие аккаунты.
- **Интеграция с Marzban**: Бесшовное подключение к API Marzban для управления пользователями.

## Технологический стек
- **Python 3.11+**
- **Aiogram 3.x** (Telegram Бот)
- **FastAPI** (Веб-сервер и Admin UI)
- **SQLAlchemy + SQLite** (База данных)
- **SQLAdmin** (Админ-панель)
- **Docker** (Деплой)

## Установка
1. Склонируйте репозиторий.
2. Скопируйте `.env.example` в `.env` и заполните данные:
   - `BOT_TOKEN`: Токен вашего бота от @BotFather.
   - `ADMIN_ID`: Ваш Telegram ID (можно узнать у @userinfobot).
   - `MARZBAN_HOST`: URL вашей панели Marzban.
   - `MARZBAN_USERNAME/PASSWORD`: Данные администратора Marzban.
3. Запустите через Docker:
   ```bash
   docker-compose up -d
   ```

## Админ-панель
Веб-админка доступна по адресу `http://ваш-ip:8000/admin`.
Там вы можете добавить **Планы** (тарифы), которые будут отображаться в боте.

## Структура проекта
- `app/core`: Конфигурация и модели базы данных.
- `app/services`: API Marzban и логика платежей.
- `app/bot`: Обработчики бота и клавиатуры.
- `app/web`: Настройка админ-панели.
- `main.py`: Точка входа в приложение.
